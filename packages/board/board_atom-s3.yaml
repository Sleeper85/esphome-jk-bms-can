# Updated : 2024.05.19
# Version : 1.1
# GitHub  : https://github.com/Sleeper85/esphome-jk-bms-can

# Atom S3 - SKU:C123
# https://docs.m5stack.com/en/core/AtomS3
esp32:
  board: esp32-s3-devkitc-1
  variant: esp32s3
  framework:
    type: esp-idf

esphome:
  # Standard uses a single line for data, Dual IO uses 2 lines for data.
  platformio_options:
    board_build.flash_mode: dio # Needed to flash the ESP32-S3 and prevent reboot loop

logger:
  hardware_uart: USB_SERIAL_JTAG

uart:
  # UART 1
  - id: uart_esp_1
    tx_pin: 1
    rx_pin: 2
    baud_rate: 115200
    rx_buffer_size: 384

canbus:
  # CANBUS NODE 1
  - platform: esp32_can
    id: canbus_node1
    tx_pin: 5
    rx_pin: 6
    can_id: 1
    bit_rate: 500kbps

output:
  # ESP LED
  - platform: gpio
    pin: 4
    id: esp_led
    inverted: true

light:
  # ESP Light
  - platform: binary
    output: esp_led
    id: esp_light
    name: "${name} On board light"
    internal: true
