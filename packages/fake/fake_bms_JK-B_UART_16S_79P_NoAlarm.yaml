interval:
  - interval: ${fake_bms_update_interval}
    then:
      # Start: 0x4E, 0x57, 0x01, 0x1B, 0x00, 0x00, 0x00, 0x00, 0x06, 0x00, 0x01
      - lambda: |-
          id(bms${fake_bms_id}).on_jk_modbus_data(0x06, {
            0x79, 0x30, 0x01, 0x0D, 0x71, 0x02, 0x0D, 0x72, 0x03, 0x0D, 0x73, 0x04, 0x0D, 0x74, 0x05, 0x0D, 0x75, 0x06,
            0x0D, 0x76, 0x07, 0x0D, 0x77, 0x08, 0x0D, 0x78, 0x09, 0x0D, 0x79, 0x0A, 0x0D, 0xDE, 0x0B, 0x0D, 0xDF, 0x0C,
            0x0D, 0xE0, 0x0D, 0x0D, 0xE1, 0x0E, 0x0D, 0xE2, 0x0F, 0x0D, 0xE3, 0x10, 0x0D, 0xE4, 0x80, 0x00, 0x1D, 0x81,
            0x00, 0x1E, 0x82, 0x00, 0x1A, 0x83, 0x15, 0xD4, 0x84, 0x80, 0xD0, 0x85, 0x4F, 0x86, 0x02, 0x87, 0x00, 0x04,
            0x89, 0x00, 0x00, 0x00, 0x00, 0x8A, 0x00, 0x10, 0x8B, 0x00, 0x00, 0x8C, 0x00, 0x07, 0x8E, 0x16, 0xD0, 0x8F,
            0x0F, 0xA0, 0x90, 0x0E, 0x10, 0x91, 0x0D, 0xDE, 0x92, 0x00, 0x05, 0x93, 0x09, 0xC4, 0x94, 0x0A, 0xF0, 0x95,
            0x00, 0x05, 0x96, 0x01, 0x2C, 0x97, 0x00, 0x96, 0x98, 0x00, 0x03, 0x99, 0x00, 0x96, 0x9A, 0x00, 0x05, 0x9B,
            0x0D, 0x7A, 0x9C, 0x00, 0x05, 0x9D, 0x01, 0x9E, 0x00, 0x5A, 0x9F, 0x00, 0x46, 0xA0, 0x00, 0x64, 0xA1, 0x00,
            0x64, 0xA2, 0x00, 0x14, 0xA3, 0x00, 0x46, 0xA4, 0x00, 0x46, 0xA5, 0xFF, 0xEC, 0xA6, 0xFF, 0xF6, 0xA7, 0xFF,
            0xEC, 0xA8, 0xFF, 0xF6, 0xA9, 0x10, 0xAA, 0x00, 0x00, 0x01, 0x18, 0xAB, 0x01, 0xAC, 0x01, 0xAD, 0x04, 0x11,
            0xAE, 0x01, 0xAF, 0x00, 0xB0, 0x00, 0x0A, 0xB1, 0x14, 0xB2, 0x31, 0x32, 0x33, 0x34, 0x35, 0x36, 0x00, 0x00,
            0x00, 0x00, 0xB3, 0x00, 0xB4, 0x49, 0x6E, 0x70, 0x75, 0x74, 0x20, 0x55, 0x73, 0xB5, 0x32, 0x31, 0x30, 0x31,
            0xB6, 0x00, 0x00, 0xE2, 0x00, 0xB7, 0x48, 0x36, 0x2E, 0x58, 0x5F, 0x5F, 0x53, 0x36, 0x2E, 0x31, 0x2E, 0x33,
            0x53, 0x5F, 0x5F, 0xB8, 0x00, 0xB9, 0x00, 0x00, 0x00, 0x00, 0xBA, 0x42, 0x54, 0x33, 0x30, 0x37, 0x32, 0x30,
            0x32, 0x30, 0x31, 0x32, 0x30, 0x30, 0x30, 0x30, 0x32, 0x30, 0x30, 0x35, 0x32, 0x31, 0x30, 0x30, 0x31, 0xC0,
            0x01,
          });
      # End: 0x00 0x00 0x00 0x00 0x68 0x00 0x00 0x54 0xD1

# Status response
# <- 0x4E 0x57 0x01 0x1B 0x00 0x00 0x00 0x00 0x06 0x00 0x01: Header
#
# *Data*
#
# Address Content: Description      Decoded content                         Coeff./Unit
# 0x79: Individual Cell voltage
# 0x30: Cell count               48 / 3 bytes = 16 cells
# 0x01 0x0D 0x71: Cell 1         3441 * 0.001 = 3.441V                        0.001 V
# 0x02 0x0D 0x72: Cell 2         3442 * 0.001 = 3.442V                        0.001 V
# 0x03 0x0D 0x73: Cell 3         3443 * 0.001 = 3.443V                        0.001 V
# 0x04 0x0D 0x74: Cell 4         3444                                         0.001 V
# 0x05 0x0D 0x75: Cell 5         3445                                         0.001 V
# 0x06 0x0D 0x76: Cell 6         3446                                         0.001 V
# 0x07 0x0D 0x77: Cell 7         3447                                         0.001 V
# 0x08 0x0D 0x78: Cell 8         3448                                         0.001 V
# 0x09 0x0D 0x79: Cell 9         3449                                         0.001 V
# 0x0A 0x0D 0xDE: Cell 10        3550                                         0.001 V
# 0x0B 0x0D 0xDF: Cell 11        3551                                         0.001 V
# 0x0C 0x0D 0xE0: Cell 12        3552                                         0.001 V
# 0x0D 0x0D 0xE1: Cell 13        3553                                         0.001 V
# 0x0E 0x0D 0xE2: Cell 14        3554                                         0.001 V
# 0x0F 0x0D 0xE3: Cell 15        3555                                         0.001 V
# 0x10 0x0D 0xE4: Cell 16        3556                                         0.001 V

# 0x80 0x00 0x1D: Read power tube temperature                 29°C                      1.0 °C
# --->  99 = 99°C, 100 = 100°C, 101 = -1°C, 140 = -40°C

# 0x81 0x00 0x1E: Read the temperature in the battery box     30°C                      1.0 °C

# 0x82 0x00 0x1A: Read battery temperature                    26°C                      1.0 °C

# 0x83 0x15 0xD4: Total battery voltage                       5588 * 0.01 = 55.88V      0.01 V

# 0x84 0x80 0xD0: Current data                                32976                     0.01 A

# 0x85 0x4F: Battery remaining capacity                       79% soc

# 0x86 0x02: Number of battery temperature sensors             2                        1.0  count

# 0x87 0x00 0x04: Number of battery cycles                     4                        1.0  count

# 0x89 0x00 0x00 0x00 0x00: Total battery cycle capacity

# 0x8A 0x00 0x10: Total number of battery strings             16                        1.0  count

# 0x8B 0x00 0x00: Battery warning message                     0000000000000000          NoAlarm
#
# Bit 0    Low capacity                                1 (alarm), 0 (normal)    warning
# Bit 1    Power tube overtemperature                  1 (alarm), 0 (normal)    alarm
# Bit 2    Charging overvoltage                        1 (alarm), 0 (normal)    alarm
# Bit 3    Discharging undervoltage                    1 (alarm), 0 (normal)    alarm
# Bit 4    Battery over temperature                    1 (alarm), 0 (normal)    alarm
# Bit 5    Charging overcurrent                        1 (alarm), 0 (normal)    alarm
# Bit 6    Discharging overcurrent                     1 (alarm), 0 (normal)    alarm
# Bit 7    Cell pressure difference                    1 (alarm), 0 (normal)    alarm
# Bit 8    Overtemperature alarm in the battery box    1 (alarm), 0 (normal)    alarm
# Bit 9    Battery low temperature                     1 (alarm), 0 (normal)    alarm
# Bit 10   Cell overvoltage                            1 (alarm), 0 (normal)    alarm
# Bit 11   Cell undervoltage                           1 (alarm), 0 (normal)    alarm
# Bit 12   309_A protection                            1 (alarm), 0 (normal)    alarm
# Bit 13   309_A protection                            1 (alarm), 0 (normal)    alarm
# Bit 14   Reserved
# Bit 15   Reserved
#
# Examples:
# 0x0001 = 00000000 00000001: Low capacity alarm
# 0x0002 = 00000000 00000010: MOS tube over-temperature alarm
# 0x0003 = 00000000 00000011: Low capacity alarm AND power tube over-temperature alarm

# 0x8C 0x00 0x07: Battery status information                  0000 0000 0000 0111
# Bit 0: Charging enabled        1 (on), 0 (off)
# Bit 1: Discharging enabled     1 (on), 0 (off)
# Bit 2: Balancer enabled        1 (on), 0 (off)
# Bit 3: Battery dropped(?)      1 (normal), 0 (offline)
# Bit 4...15: Reserved

# Example: 0000 0000 0000 0111 -> Charging + Discharging + Balancer enabled

# 0x8E 0x16 0xD0: Total voltage overvoltage protection         5840 * 0.01 = 58.40V     0.01 V

# 0x8F 0x0F 0xA0: Total voltage undervoltage protection        4000 * 0.01 = 40.00V     0.01 V

# 0x90 0x0E 0x10: Cell overvoltage protection voltage          3600 * 0.001 = 3.600V     0.001 V

# 0x91 0x0D 0xDE: Cell overvoltage recovery voltage            3550 * 0.001 = 3.550V     0.001 V

# 0x92 0x00 0x05: Cell overvoltage protection delay            5s                          1.0 s

# 0x93 0x09 0xC4: Cell undervoltage protection voltage         2500 * 0.001 = 2.500V     0.001 V

# 0x94 0x0A 0xF0: Cell undervoltage recovery voltage           2800 * 0.001 = 2.800V     0.001 V

# 0x95 0x00 0x05: Cell undervoltage protection delay           5s                         1.0 s

# 0x96 0x01 0x2C: Cell pressure difference protection value    300 * 0.001 = 0.300V     0.001 V     0.000-1.000V

# 0x97 0x00 0x96: Discharge overcurrent protection value       150A                       1.0 A

# 0x98 0x00 0x03: Discharge overcurrent delay                  3s                         1.0 s

# 0x99 0x00 0x96: Charging overcurrent protection value        150A                       1.0 A

# 0x9A 0x00 0x05: Charge overcurrent delay                     5s                         1.0 s

# 0x9B 0x0D 0x7A: Balanced starting voltage                    3450 * 0.001 = 3.450V     0.001 V

# 0x9C 0x00 0x05: Balanced opening pressure difference         5 * 0.001 = 0.005V        0.001 V    0.01-1V

# 0x9D 0x01: Active balance switch                             1 (on)                     Bool      0 (off), 1 (on)

# 0x9E 0x00 0x5A: Power tube temperature protection value                90°C            1.0 °C     0-100°C

# 0x9F 0x00 0x46: Power tube temperature recovery value                  70°C            1.0 °C     0-100°C

# 0xA0 0x00 0x64: Temperature protection value in the battery box       100°C            1.0 °C     40-100°C

# 0xA1 0x00 0x64: Temperature recovery value in the battery box         100°C            1.0 °C     40-100°C

# 0xA2 0x00 0x14: Battery temperature difference protection value        20°C            1.0 °C     5-10°C

# 0xA3 0x00 0x46: Battery charging high temperature protection value     70°C            1.0 °C     0-100°C

# 0xA4 0x00 0x46: Battery discharge high temperature protection value    70°C            1.0 °C     0-100°C

# 0xA5 0xFF 0xEC: Charging low temperature protection value             -20°C            1.0 °C     -45...25°C

# 0xA6 0xFF 0xF6: Charging low temperature protection recovery value    -10°C            1.0 °C     -45...25°C

# 0xA7 0xFF 0xEC: Discharge low temperature protection value            -20°C            1.0 °C     -45...25°C

# 0xA8 0xFF 0xF6: Discharge low temperature protection recovery value   -10°C            1.0 °C     -45...25°C

# 0xA9 0x10: Battery string setting                                      16              1.0 count

# 0xAA 0x00 0x00 0x01 0x18: Total battery capacity setting               280 Ah          1.0 Ah

# 0xAB 0x01: Charging MOS tube switch                                    1 (on)          Bool       0 (off), 1 (on)

# 0xAC 0x01: Discharge MOS tube switch                                   1 (on)          Bool       0 (off), 1 (on)

# 0xAD 0x04 0x11: Current calibration                                    1041mA * 0.001 = 1.041A     0.001 A     0.1-2.0A

# 0xAE 0x01: Protection board address                                    1               1.0

# 0xAF 0x00: Battery Type                                                0               1.0
# ---> 0 (lithium iron phosphate), 1 (ternary), 2 (lithium titanate)

# 0xB0 0x00 0x0A: Sleep waiting time                                     10s             1.0 s

# 0xB1 0x14: Low volume alarm                                            20%             1.0 %      0-80%

# 0xB2 0x31 0x32 0x33 0x34 0x35 0x36 0x00 0x00 0x00 0x00: Modify parameter password

# 0xB3 0x00: Dedicated charger switch                                     1 (on)         Bool       0 (off), 1 (on)

# 0xB4 0x49 0x6E 0x70 0x75 0x74 0x20 0x55 0x73: Device ID code

# 0xB5 0x32 0x31 0x30 0x31: Date of manufacture
# 0xB6 0x00 0x00 0xE2 0x00: System working hours

# 0xB7 0x48 0x36 0x2E 0x58 0x5F 0x5F 0x53
#      0x36 0x2E 0x31 0x2E 0x33 0x53 0x5F 0x5F: Software version number

# 0xB8 0x00: Whether to start current calibration
# 0xB9 0x00 0x00 0x00 0x00: Actual battery capacity
#   Firmware version >= 10.10 required
#   See https://github.com/syssi/esphome-jk-bms/issues/212 for details

# 0xBA 0x42 0x54 0x33 0x30 0x37 0x32 0x30 0x32 0x30 0x31 0x32 0x30
#      0x30 0x30 0x30 0x32 0x30 0x30 0x35 0x32 0x31 0x30 0x30 0x31: Manufacturer ID naming

# 0xC0 0x01: Protocol version number

# 00 00 00 00 68 00 00 54 D1: End of frame
